# Quantitative Momentum Portfolio Strategy

A systematic trading strategy that combines K-Means clustering with mean-variance optimization to identify and capitalize on momentum stocks. Achieved **119% total return** vs 37% S&P 500 over 5-year backtest.

## Strategy Overview

This strategy uses machine learning to cluster stocks based on technical profiles, then constructs optimal portfolios using Modern Portfolio Theory. Monthly rebalancing keeps the portfolio aligned with current market momentum while managing risk through diversification constraints.

### Performance Highlights
- **Total Return:** 119% (vs 37% S&P 500)
- **Annualized Return:** 23%
- **Sharpe Ratio:** 1.19
- **Max Drawdown:** [varies by period]
- **Backtest Period:** 5 years (2018-2023)

## How It Works

### 1. Universe Selection
- 100 large-cap stocks (mega-cap focus)
- Filtered to top 50 by 3-year rolling avg dollar volume
- Ensures liquidity and tradability

### 2. Technical Feature Engineering
Monthly calculation of:
- **Garman-Klass Volatility** - Better vol estimate using OHLC data
- **Multi-Period Momentum** - 1, 2, 3, 6 month returns (geometrically annualized)
- **RSI** - 20-period relative strength
- **Bollinger Bands** - Price deviation metrics
- **ATR** - Normalized average true range
- **MACD** - Trend momentum

### 3. K-Means Clustering
- 4 clusters based on normalized technical features
- Custom centroid initialization targeting RSI regimes (30, 45, 55, 70)
- Strategy trades stocks from Cluster 3 (strong momentum + moderate RSI)

### 4. Portfolio Optimization
- **Efficient Frontier** maximizes Sharpe ratio each month
- 12-month lookback for covariance estimation
- Max 10% position size for diversification
- Equal-weight fallback if optimization fails

### 5. Monthly Rebalancing
- Trades executed at month-end based on previous month signals
- Avoids look-ahead bias by using lagged data

## Installation

```bash
pip install yfinance PyPortfolioOpt scikit-learn pandas numpy matplotlib


The script will:

Download historical data for 100 stocks

Calculate technical indicators

Perform monthly clustering

Optimize portfolios

Key paramaters 

TOP_N_LIQUID = 50           # Number of stocks to trade
N_CLUSTERS = 4              # K-Means clusters
SELECTED_CLUSTER = 3        # Which cluster to trade
MAX_WEIGHT = 0.10           # Max 10% per position
MOMENTUM_LAGS =    # Momentum lookback periods[10][11][12][13]

Technical Implementation
Data Processing:

Daily data aggregated to monthly to reduce noise

Log returns for better statistical properties

Outlier clipping at 0.5th/99.5th percentiles

Risk Management:

Position size limits enforce diversification

Dynamic lower bounds based on universe size

Volatility normalization for consistent risk exposure

Robustness:

Handles yfinance MultiIndex inconsistencies

Fallback to equal-weight if optimization fails

Timezone handling for data alignment

Planned Enhancements:

Add transaction cost analysis (bps per trade)

Test weekly/bi-weekly rebalancing

Implement sector neutrality

Add walk-forward optimization

Explore alternative clustering (DBSCAN, hierarchical)

Research Notes
The strategy exploits momentum persistence while using clustering to avoid overcrowded trades. The 12-month covariance lookback balances stability with market adaptivity. RSI-anchored clustering helps separate momentum stocks by overbought/oversold conditions,
reducing correlation within the selected universe.




